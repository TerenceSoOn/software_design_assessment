INFO:     Will watch for changes in these directories: ['/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend']
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [72222] using WatchFiles
INFO:     Started server process [72359]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'venv/lib/python3.13/site-packages/bcrypt/__init__.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [72359]
INFO:     Started server process [72397]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
(trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
ğŸš€ Starting FlirtNet backend...
âœ… Database initialized successfully!
âœ… Server ready at http://localhost:8000
ğŸ“š API docs at http://localhost:8000/docs
INFO:     127.0.0.1:62872 - "POST /auth/register HTTP/1.1" 201 Created
INFO:     127.0.0.1:62977 - "POST /auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:62977 - "OPTIONS /profiles/me HTTP/1.1" 200 OK
INFO:     127.0.0.1:62977 - "GET /profiles/me HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/fastapi/applications.py", line 1139, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/fastapi/routing.py", line 119, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/fastapi/routing.py", line 105, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/fastapi/routing.py", line 375, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 647, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/app/utils/dependencies.py", line 27, in get_current_user
    token = credentials.credentials
            ^^^^^^^^^^^
NameError: name 'credentials' is not defined
INFO:     127.0.0.1:63013 - "OPTIONS /auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:63013 - "POST /auth/login HTTP/1.1" 401 Unauthorized
WARNING:  WatchFiles detected changes in 'app/utils/dependencies.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [72397]
INFO:     Started server process [73893]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/utils/dependencies.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [73893]
INFO:     Started server process [73901]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/utils/dependencies.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [73901]
WARNING:  WatchFiles detected changes in 'app/utils/dependencies.py'. Reloading...
INFO:     Started server process [73902]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Started server process [73903]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/utils/dependencies.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [73903]
INFO:     Started server process [73904]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
(trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
ğŸš€ Starting FlirtNet backend...
âœ… Database initialized successfully!
âœ… Server ready at http://localhost:8000
ğŸ“š API docs at http://localhost:8000/docs
INFO:     127.0.0.1:63360 - "POST /auth/register HTTP/1.1" 201 Created
INFO:     127.0.0.1:63401 - "POST /auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:63401 - "GET /profiles/me HTTP/1.1" 200 OK
INFO:     127.0.0.1:63412 - "OPTIONS /connections/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:63414 - "OPTIONS /connections/pending HTTP/1.1" 200 OK
INFO:     127.0.0.1:63417 - "OPTIONS /connections/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:63418 - "OPTIONS /connections/pending HTTP/1.1" 200 OK
INFO:     127.0.0.1:63412 - "GET /connections/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:63422 - "GET /connections/pending HTTP/1.1" 200 OK
INFO:     127.0.0.1:63412 - "GET /connections/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:63422 - "GET /connections/pending HTTP/1.1" 200 OK
INFO:     127.0.0.1:63445 - "OPTIONS /posts/?skip=0&limit=20 HTTP/1.1" 200 OK
INFO:     127.0.0.1:63446 - "OPTIONS /posts/?skip=0&limit=20 HTTP/1.1" 200 OK
INFO:     127.0.0.1:63445 - "GET /posts/?skip=0&limit=20 HTTP/1.1" 200 OK
INFO:     127.0.0.1:63445 - "GET /posts/?skip=0&limit=20 HTTP/1.1" 200 OK
INFO:     127.0.0.1:63659 - "GET /posts/?skip=0&limit=20 HTTP/1.1" 200 OK
INFO:     127.0.0.1:63659 - "GET /posts/?skip=0&limit=20 HTTP/1.1" 200 OK
INFO:     127.0.0.1:63664 - "GET /connections/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:63665 - "GET /connections/pending HTTP/1.1" 200 OK
INFO:     127.0.0.1:63665 - "GET /connections/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:63664 - "GET /connections/pending HTTP/1.1" 200 OK
INFO:     127.0.0.1:63668 - "GET /connections/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:63669 - "GET /connections/pending HTTP/1.1" 200 OK
INFO:     127.0.0.1:63668 - "GET /connections/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:63669 - "GET /connections/pending HTTP/1.1" 200 OK
INFO:     127.0.0.1:63685 - "OPTIONS /ai/safety-check HTTP/1.1" 200 OK
âŒ DeepSeek API error: 401
INFO:     127.0.0.1:63685 - "POST /ai/safety-check HTTP/1.1" 200 OK
âŒ DeepSeek API error: 401
INFO:     127.0.0.1:63719 - "POST /ai/safety-check HTTP/1.1" 200 OK
âŒ DeepSeek API error: 401
INFO:     127.0.0.1:63726 - "POST /ai/safety-check HTTP/1.1" 200 OK
INFO:     127.0.0.1:63732 - "GET /posts/?skip=0&limit=20 HTTP/1.1" 200 OK
INFO:     127.0.0.1:63732 - "GET /posts/?skip=0&limit=20 HTTP/1.1" 200 OK
INFO:     127.0.0.1:63732 - "GET /connections/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:63734 - "GET /connections/pending HTTP/1.1" 200 OK
INFO:     127.0.0.1:63732 - "GET /connections/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:63734 - "GET /connections/pending HTTP/1.1" 200 OK
INFO:     127.0.0.1:63738 - "OPTIONS /connections/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:63738 - "POST /connections/ HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/pg8000/legacy.py", line 256, in execute
    self._context = self._c.execute_unnamed(
                    ~~~~~~~~~~~~~~~~~~~~~~~^
        statement, vals=vals, oids=self._input_oids, stream=stream
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/pg8000/core.py", line 723, in execute_unnamed
    self.handle_messages(context)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/pg8000/core.py", line 844, in handle_messages
    raise context.error
pg8000.exceptions.DatabaseError: {'S': 'ERROR', 'V': 'ERROR', 'C': '23503', 'M': 'insert or update on table "datemate_connections" violates foreign key constraint "datemate_connections_receiver_id_fkey"', 'D': 'Key (receiver_id)=(85) is not present in table "users".', 's': 'public', 't': 'datemate_connections', 'n': 'datemate_connections_receiver_id_fkey', 'F': 'ri_triggers.c', 'L': '2596', 'R': 'ri_ReportViolation'}

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/pg8000/legacy.py", line 283, in execute
    raise cls(msg)
pg8000.dbapi.ProgrammingError: {'S': 'ERROR', 'V': 'ERROR', 'C': '23503', 'M': 'insert or update on table "datemate_connections" violates foreign key constraint "datemate_connections_receiver_id_fkey"', 'D': 'Key (receiver_id)=(85) is not present in table "users".', 's': 'public', 't': 'datemate_connections', 'n': 'datemate_connections_receiver_id_fkey', 'F': 'ri_triggers.c', 'L': '2596', 'R': 'ri_ReportViolation'}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/fastapi/applications.py", line 1139, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/fastapi/routing.py", line 119, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/fastapi/routing.py", line 105, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/fastapi/routing.py", line 385, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/fastapi/routing.py", line 286, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/anyio/to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/app/routers/connections.py", line 61, in send_connection_request
    db.commit()
    ~~~~~~~~~^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1311, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1286, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4331, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4466, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4427, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<3 lines>...
        insert,
        ^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
        statement,
        params,
        execution_options=execution_options,
    )
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/pg8000/legacy.py", line 283, in execute
    raise cls(msg)
sqlalchemy.exc.ProgrammingError: (pg8000.dbapi.ProgrammingError) {'S': 'ERROR', 'V': 'ERROR', 'C': '23503', 'M': 'insert or update on table "datemate_connections" violates foreign key constraint "datemate_connections_receiver_id_fkey"', 'D': 'Key (receiver_id)=(85) is not present in table "users".', 's': 'public', 't': 'datemate_connections', 'n': 'datemate_connections_receiver_id_fkey', 'F': 'ri_triggers.c', 'L': '2596', 'R': 'ri_ReportViolation'}
[SQL: INSERT INTO datemate_connections (requester_id, receiver_id, status, requested_at, responded_at) VALUES (%s::INTEGER, %s::INTEGER, %s::VARCHAR, %s::TIMESTAMP WITHOUT TIME ZONE, %s::TIMESTAMP WITHOUT TIME ZONE) RETURNING datemate_connections.id]
[parameters: (2, 85, 'pending', datetime.datetime(2025, 12, 3, 4, 36, 28, 958680), None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
INFO:     127.0.0.1:63740 - "POST /connections/ HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/pg8000/legacy.py", line 256, in execute
    self._context = self._c.execute_unnamed(
                    ~~~~~~~~~~~~~~~~~~~~~~~^
        statement, vals=vals, oids=self._input_oids, stream=stream
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/pg8000/core.py", line 723, in execute_unnamed
    self.handle_messages(context)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/pg8000/core.py", line 844, in handle_messages
    raise context.error
pg8000.exceptions.DatabaseError: {'S': 'ERROR', 'V': 'ERROR', 'C': '23503', 'M': 'insert or update on table "datemate_connections" violates foreign key constraint "datemate_connections_receiver_id_fkey"', 'D': 'Key (receiver_id)=(85) is not present in table "users".', 's': 'public', 't': 'datemate_connections', 'n': 'datemate_connections_receiver_id_fkey', 'F': 'ri_triggers.c', 'L': '2596', 'R': 'ri_ReportViolation'}

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/pg8000/legacy.py", line 283, in execute
    raise cls(msg)
pg8000.dbapi.ProgrammingError: {'S': 'ERROR', 'V': 'ERROR', 'C': '23503', 'M': 'insert or update on table "datemate_connections" violates foreign key constraint "datemate_connections_receiver_id_fkey"', 'D': 'Key (receiver_id)=(85) is not present in table "users".', 's': 'public', 't': 'datemate_connections', 'n': 'datemate_connections_receiver_id_fkey', 'F': 'ri_triggers.c', 'L': '2596', 'R': 'ri_ReportViolation'}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/fastapi/applications.py", line 1139, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/fastapi/routing.py", line 119, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/fastapi/routing.py", line 105, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/fastapi/routing.py", line 385, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/fastapi/routing.py", line 286, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/anyio/to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/app/routers/connections.py", line 61, in send_connection_request
    db.commit()
    ~~~~~~~~~^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1311, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1286, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4331, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4466, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4427, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<3 lines>...
        insert,
        ^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
        statement,
        params,
        execution_options=execution_options,
    )
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/pg8000/legacy.py", line 283, in execute
    raise cls(msg)
sqlalchemy.exc.ProgrammingError: (pg8000.dbapi.ProgrammingError) {'S': 'ERROR', 'V': 'ERROR', 'C': '23503', 'M': 'insert or update on table "datemate_connections" violates foreign key constraint "datemate_connections_receiver_id_fkey"', 'D': 'Key (receiver_id)=(85) is not present in table "users".', 's': 'public', 't': 'datemate_connections', 'n': 'datemate_connections_receiver_id_fkey', 'F': 'ri_triggers.c', 'L': '2596', 'R': 'ri_ReportViolation'}
[SQL: INSERT INTO datemate_connections (requester_id, receiver_id, status, requested_at, responded_at) VALUES (%s::INTEGER, %s::INTEGER, %s::VARCHAR, %s::TIMESTAMP WITHOUT TIME ZONE, %s::TIMESTAMP WITHOUT TIME ZONE) RETURNING datemate_connections.id]
[parameters: (2, 85, 'pending', datetime.datetime(2025, 12, 3, 4, 36, 30, 765342), None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
INFO:     127.0.0.1:63742 - "POST /connections/ HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/pg8000/legacy.py", line 256, in execute
    self._context = self._c.execute_unnamed(
                    ~~~~~~~~~~~~~~~~~~~~~~~^
        statement, vals=vals, oids=self._input_oids, stream=stream
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/pg8000/core.py", line 723, in execute_unnamed
    self.handle_messages(context)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/pg8000/core.py", line 844, in handle_messages
    raise context.error
pg8000.exceptions.DatabaseError: {'S': 'ERROR', 'V': 'ERROR', 'C': '23503', 'M': 'insert or update on table "datemate_connections" violates foreign key constraint "datemate_connections_receiver_id_fkey"', 'D': 'Key (receiver_id)=(85) is not present in table "users".', 's': 'public', 't': 'datemate_connections', 'n': 'datemate_connections_receiver_id_fkey', 'F': 'ri_triggers.c', 'L': '2596', 'R': 'ri_ReportViolation'}

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/pg8000/legacy.py", line 283, in execute
    raise cls(msg)
pg8000.dbapi.ProgrammingError: {'S': 'ERROR', 'V': 'ERROR', 'C': '23503', 'M': 'insert or update on table "datemate_connections" violates foreign key constraint "datemate_connections_receiver_id_fkey"', 'D': 'Key (receiver_id)=(85) is not present in table "users".', 's': 'public', 't': 'datemate_connections', 'n': 'datemate_connections_receiver_id_fkey', 'F': 'ri_triggers.c', 'L': '2596', 'R': 'ri_ReportViolation'}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/fastapi/applications.py", line 1139, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/fastapi/routing.py", line 119, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/fastapi/routing.py", line 105, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/fastapi/routing.py", line 385, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/fastapi/routing.py", line 286, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/anyio/to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/app/routers/connections.py", line 61, in send_connection_request
    db.commit()
    ~~~~~~~~~^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1311, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1286, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4331, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4466, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4427, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<3 lines>...
        insert,
        ^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
        statement,
        params,
        execution_options=execution_options,
    )
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/pg8000/legacy.py", line 283, in execute
    raise cls(msg)
sqlalchemy.exc.ProgrammingError: (pg8000.dbapi.ProgrammingError) {'S': 'ERROR', 'V': 'ERROR', 'C': '23503', 'M': 'insert or update on table "datemate_connections" violates foreign key constraint "datemate_connections_receiver_id_fkey"', 'D': 'Key (receiver_id)=(85) is not present in table "users".', 's': 'public', 't': 'datemate_connections', 'n': 'datemate_connections_receiver_id_fkey', 'F': 'ri_triggers.c', 'L': '2596', 'R': 'ri_ReportViolation'}
[SQL: INSERT INTO datemate_connections (requester_id, receiver_id, status, requested_at, responded_at) VALUES (%s::INTEGER, %s::INTEGER, %s::VARCHAR, %s::TIMESTAMP WITHOUT TIME ZONE, %s::TIMESTAMP WITHOUT TIME ZONE) RETURNING datemate_connections.id]
[parameters: (2, 85, 'pending', datetime.datetime(2025, 12, 3, 4, 36, 31, 433749), None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
INFO:     127.0.0.1:63744 - "POST /connections/ HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/pg8000/legacy.py", line 256, in execute
    self._context = self._c.execute_unnamed(
                    ~~~~~~~~~~~~~~~~~~~~~~~^
        statement, vals=vals, oids=self._input_oids, stream=stream
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/pg8000/core.py", line 723, in execute_unnamed
    self.handle_messages(context)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/pg8000/core.py", line 844, in handle_messages
    raise context.error
pg8000.exceptions.DatabaseError: {'S': 'ERROR', 'V': 'ERROR', 'C': '23503', 'M': 'insert or update on table "datemate_connections" violates foreign key constraint "datemate_connections_receiver_id_fkey"', 'D': 'Key (receiver_id)=(85) is not present in table "users".', 's': 'public', 't': 'datemate_connections', 'n': 'datemate_connections_receiver_id_fkey', 'F': 'ri_triggers.c', 'L': '2596', 'R': 'ri_ReportViolation'}

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/pg8000/legacy.py", line 283, in execute
    raise cls(msg)
pg8000.dbapi.ProgrammingError: {'S': 'ERROR', 'V': 'ERROR', 'C': '23503', 'M': 'insert or update on table "datemate_connections" violates foreign key constraint "datemate_connections_receiver_id_fkey"', 'D': 'Key (receiver_id)=(85) is not present in table "users".', 's': 'public', 't': 'datemate_connections', 'n': 'datemate_connections_receiver_id_fkey', 'F': 'ri_triggers.c', 'L': '2596', 'R': 'ri_ReportViolation'}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/fastapi/applications.py", line 1139, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/fastapi/routing.py", line 119, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/fastapi/routing.py", line 105, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/fastapi/routing.py", line 385, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/fastapi/routing.py", line 286, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/anyio/to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/app/routers/connections.py", line 61, in send_connection_request
    db.commit()
    ~~~~~~~~~^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1311, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1286, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4331, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4466, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4427, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<3 lines>...
        insert,
        ^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
        statement,
        params,
        execution_options=execution_options,
    )
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/pg8000/legacy.py", line 283, in execute
    raise cls(msg)
sqlalchemy.exc.ProgrammingError: (pg8000.dbapi.ProgrammingError) {'S': 'ERROR', 'V': 'ERROR', 'C': '23503', 'M': 'insert or update on table "datemate_connections" violates foreign key constraint "datemate_connections_receiver_id_fkey"', 'D': 'Key (receiver_id)=(85) is not present in table "users".', 's': 'public', 't': 'datemate_connections', 'n': 'datemate_connections_receiver_id_fkey', 'F': 'ri_triggers.c', 'L': '2596', 'R': 'ri_ReportViolation'}
[SQL: INSERT INTO datemate_connections (requester_id, receiver_id, status, requested_at, responded_at) VALUES (%s::INTEGER, %s::INTEGER, %s::VARCHAR, %s::TIMESTAMP WITHOUT TIME ZONE, %s::TIMESTAMP WITHOUT TIME ZONE) RETURNING datemate_connections.id]
[parameters: (2, 85, 'pending', datetime.datetime(2025, 12, 3, 4, 36, 31, 965023), None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
INFO:     127.0.0.1:63746 - "POST /connections/ HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/pg8000/legacy.py", line 256, in execute
    self._context = self._c.execute_unnamed(
                    ~~~~~~~~~~~~~~~~~~~~~~~^
        statement, vals=vals, oids=self._input_oids, stream=stream
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/pg8000/core.py", line 723, in execute_unnamed
    self.handle_messages(context)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/pg8000/core.py", line 844, in handle_messages
    raise context.error
pg8000.exceptions.DatabaseError: {'S': 'ERROR', 'V': 'ERROR', 'C': '23503', 'M': 'insert or update on table "datemate_connections" violates foreign key constraint "datemate_connections_receiver_id_fkey"', 'D': 'Key (receiver_id)=(85) is not present in table "users".', 's': 'public', 't': 'datemate_connections', 'n': 'datemate_connections_receiver_id_fkey', 'F': 'ri_triggers.c', 'L': '2596', 'R': 'ri_ReportViolation'}

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/pg8000/legacy.py", line 283, in execute
    raise cls(msg)
pg8000.dbapi.ProgrammingError: {'S': 'ERROR', 'V': 'ERROR', 'C': '23503', 'M': 'insert or update on table "datemate_connections" violates foreign key constraint "datemate_connections_receiver_id_fkey"', 'D': 'Key (receiver_id)=(85) is not present in table "users".', 's': 'public', 't': 'datemate_connections', 'n': 'datemate_connections_receiver_id_fkey', 'F': 'ri_triggers.c', 'L': '2596', 'R': 'ri_ReportViolation'}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/fastapi/applications.py", line 1139, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/fastapi/routing.py", line 119, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/fastapi/routing.py", line 105, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/fastapi/routing.py", line 385, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/fastapi/routing.py", line 286, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/anyio/to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/app/routers/connections.py", line 61, in send_connection_request
    db.commit()
    ~~~~~~~~~^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1311, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1286, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4331, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4466, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4427, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<3 lines>...
        insert,
        ^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
        statement,
        params,
        execution_options=execution_options,
    )
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/pg8000/legacy.py", line 283, in execute
    raise cls(msg)
sqlalchemy.exc.ProgrammingError: (pg8000.dbapi.ProgrammingError) {'S': 'ERROR', 'V': 'ERROR', 'C': '23503', 'M': 'insert or update on table "datemate_connections" violates foreign key constraint "datemate_connections_receiver_id_fkey"', 'D': 'Key (receiver_id)=(85) is not present in table "users".', 's': 'public', 't': 'datemate_connections', 'n': 'datemate_connections_receiver_id_fkey', 'F': 'ri_triggers.c', 'L': '2596', 'R': 'ri_ReportViolation'}
[SQL: INSERT INTO datemate_connections (requester_id, receiver_id, status, requested_at, responded_at) VALUES (%s::INTEGER, %s::INTEGER, %s::VARCHAR, %s::TIMESTAMP WITHOUT TIME ZONE, %s::TIMESTAMP WITHOUT TIME ZONE) RETURNING datemate_connections.id]
[parameters: (2, 85, 'pending', datetime.datetime(2025, 12, 3, 4, 36, 32, 469011), None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
INFO:     127.0.0.1:63748 - "POST /connections/ HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/pg8000/legacy.py", line 256, in execute
    self._context = self._c.execute_unnamed(
                    ~~~~~~~~~~~~~~~~~~~~~~~^
        statement, vals=vals, oids=self._input_oids, stream=stream
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/pg8000/core.py", line 723, in execute_unnamed
    self.handle_messages(context)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/pg8000/core.py", line 844, in handle_messages
    raise context.error
pg8000.exceptions.DatabaseError: {'S': 'ERROR', 'V': 'ERROR', 'C': '23503', 'M': 'insert or update on table "datemate_connections" violates foreign key constraint "datemate_connections_receiver_id_fkey"', 'D': 'Key (receiver_id)=(85) is not present in table "users".', 's': 'public', 't': 'datemate_connections', 'n': 'datemate_connections_receiver_id_fkey', 'F': 'ri_triggers.c', 'L': '2596', 'R': 'ri_ReportViolation'}

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/pg8000/legacy.py", line 283, in execute
    raise cls(msg)
pg8000.dbapi.ProgrammingError: {'S': 'ERROR', 'V': 'ERROR', 'C': '23503', 'M': 'insert or update on table "datemate_connections" violates foreign key constraint "datemate_connections_receiver_id_fkey"', 'D': 'Key (receiver_id)=(85) is not present in table "users".', 's': 'public', 't': 'datemate_connections', 'n': 'datemate_connections_receiver_id_fkey', 'F': 'ri_triggers.c', 'L': '2596', 'R': 'ri_ReportViolation'}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/fastapi/applications.py", line 1139, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/fastapi/routing.py", line 119, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/fastapi/routing.py", line 105, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/fastapi/routing.py", line 385, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/fastapi/routing.py", line 286, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/starlette/concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/anyio/to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/app/routers/connections.py", line 61, in send_connection_request
    db.commit()
    ~~~~~~~~~^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1311, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1286, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4331, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4466, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4427, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<3 lines>...
        insert,
        ^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
        statement,
        params,
        execution_options=execution_options,
    )
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/pg8000/legacy.py", line 283, in execute
    raise cls(msg)
sqlalchemy.exc.ProgrammingError: (pg8000.dbapi.ProgrammingError) {'S': 'ERROR', 'V': 'ERROR', 'C': '23503', 'M': 'insert or update on table "datemate_connections" violates foreign key constraint "datemate_connections_receiver_id_fkey"', 'D': 'Key (receiver_id)=(85) is not present in table "users".', 's': 'public', 't': 'datemate_connections', 'n': 'datemate_connections_receiver_id_fkey', 'F': 'ri_triggers.c', 'L': '2596', 'R': 'ri_ReportViolation'}
[SQL: INSERT INTO datemate_connections (requester_id, receiver_id, status, requested_at, responded_at) VALUES (%s::INTEGER, %s::INTEGER, %s::VARCHAR, %s::TIMESTAMP WITHOUT TIME ZONE, %s::TIMESTAMP WITHOUT TIME ZONE) RETURNING datemate_connections.id]
[parameters: (2, 85, 'pending', datetime.datetime(2025, 12, 3, 4, 36, 33, 18970), None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
INFO:     127.0.0.1:63754 - "GET /connections/pending HTTP/1.1" 200 OK
INFO:     127.0.0.1:63753 - "GET /connections/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:63753 - "GET /connections/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:63754 - "GET /connections/pending HTTP/1.1" 200 OK
INFO:     127.0.0.1:63807 - "OPTIONS /profiles/me HTTP/1.1" 200 OK
INFO:     127.0.0.1:63807 - "PUT /profiles/me HTTP/1.1" 200 OK
INFO:     127.0.0.1:63885 - "GET /connections/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:63886 - "GET /connections/pending HTTP/1.1" 200 OK
INFO:     127.0.0.1:63885 - "GET /connections/pending HTTP/1.1" 200 OK
INFO:     127.0.0.1:63886 - "GET /connections/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:63886 - "GET /posts/?skip=0&limit=20 HTTP/1.1" 200 OK
INFO:     127.0.0.1:63886 - "GET /posts/?skip=0&limit=20 HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'app/models/profile.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [73904]
INFO:     Started server process [75187]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/schemas/auth.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [75187]
INFO:     Started server process [75202]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/models/profile.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [75202]
INFO:     Started server process [75207]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/schemas/auth.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [75207]
INFO:     Started server process [75209]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/routers/auth.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [75209]
INFO:     Started server process [75269]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/routers/auth.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [75269]
INFO:     Started server process [75494]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/utils/socketio_server.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [75494]
WARNING:  WatchFiles detected changes in 'app/utils/socketio_server.py'. Reloading...
INFO:     Started server process [75524]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/utils/socketio_server.py'. Reloading...
INFO:     Started server process [75527]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Started server process [75532]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/utils/socketio_server.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [75532]
INFO:     Started server process [75536]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/main.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [75536]
Process SpawnProcess-18:
Traceback (most recent call last):
  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    ~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    ~~~~~~^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/server.py", line 71, in serve
    await self._serve(sockets)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/server.py", line 78, in _serve
    config.load()
    ~~~~~~~~~~~^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/config.py", line 439, in load
    self.loaded_app = import_from_string(self.app)
                      ~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/app/main.py", line 22, in <module>
    socket_app = socketio.ASGIApp(sio, app)
                 ^^^^^^^^
NameError: name 'socketio' is not defined
WARNING:  WatchFiles detected changes in 'app/main.py'. Reloading...
INFO:     Started server process [83797]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/main.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [83797]
INFO:     Started server process [83804]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/utils/deepseek.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [83804]
Process SpawnProcess-21:
Traceback (most recent call last):
  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    ~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    ~~~~~~^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/server.py", line 71, in serve
    await self._serve(sockets)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/server.py", line 78, in _serve
    config.load()
    ~~~~~~~~~~~^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/config.py", line 439, in load
    self.loaded_app = import_from_string(self.app)
                      ~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/app/main.py", line 12, in <module>
    from app.routers import auth, profiles, posts, connections, ai
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/app/routers/ai.py", line 11, in <module>
    from app.utils.deepseek import deepseek_client
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/app/utils/deepseek.py", line 54
    """
    ^
SyntaxError: unterminated triple-quoted string literal (detected at line 85)
WARNING:  WatchFiles detected changes in 'app/utils/deepseek.py'. Reloading...
Process SpawnProcess-22:
Traceback (most recent call last):
  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    ~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    ~~~~~~^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/server.py", line 71, in serve
    await self._serve(sockets)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/server.py", line 78, in _serve
    config.load()
    ~~~~~~~~~~~^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/config.py", line 439, in load
    self.loaded_app = import_from_string(self.app)
                      ~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/app/main.py", line 12, in <module>
    from app.routers import auth, profiles, posts, connections, ai
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/app/routers/ai.py", line 11, in <module>
    from app.utils.deepseek import deepseek_client
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/app/utils/deepseek.py", line 54
    """
    ^
SyntaxError: unterminated triple-quoted string literal (detected at line 85)
WARNING:  WatchFiles detected changes in 'app/utils/deepseek.py'. Reloading...
Process SpawnProcess-23:
Traceback (most recent call last):
  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    ~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    ~~~~~~^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/server.py", line 71, in serve
    await self._serve(sockets)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/server.py", line 78, in _serve
    config.load()
    ~~~~~~~~~~~^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/config.py", line 439, in load
    self.loaded_app = import_from_string(self.app)
                      ~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/app/main.py", line 12, in <module>
    from app.routers import auth, profiles, posts, connections, ai
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/app/routers/ai.py", line 11, in <module>
    from app.utils.deepseek import deepseek_client
ImportError: cannot import name 'deepseek_client' from 'app.utils.deepseek' (/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/app/utils/deepseek.py)
WARNING:  WatchFiles detected changes in 'app/routers/ai.py'. Reloading...
Process SpawnProcess-24:
Traceback (most recent call last):
  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    ~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    ~~~~~~^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/server.py", line 71, in serve
    await self._serve(sockets)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/server.py", line 78, in _serve
    config.load()
    ~~~~~~~~~~~^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/config.py", line 439, in load
    self.loaded_app = import_from_string(self.app)
                      ~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/app/main.py", line 12, in <module>
    from app.routers import auth, profiles, posts, connections, ai
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/app/routers/ai.py", line 30
    messages.append({"role": msg.role, "content": msg.content})
IndentationError: unexpected indent
WARNING:  WatchFiles detected changes in 'app/routers/ai.py'. Reloading...
Process SpawnProcess-25:
Traceback (most recent call last):
  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    ~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    ~~~~~~^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/server.py", line 71, in serve
    await self._serve(sockets)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/server.py", line 78, in _serve
    config.load()
    ~~~~~~~~~~~^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/config.py", line 439, in load
    self.loaded_app = import_from_string(self.app)
                      ~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/app/main.py", line 12, in <module>
    from app.routers import auth, profiles, posts, connections, ai
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/app/routers/ai.py", line 30
    messages.append({"role": msg.role, "content": msg.content})
IndentationError: unexpected indent
WARNING:  WatchFiles detected changes in 'app/utils/deepseek.py'. Reloading...
Process SpawnProcess-26:
Traceback (most recent call last):
  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    ~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    ~~~~~~^^^^^^^^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/server.py", line 71, in serve
    await self._serve(sockets)
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/server.py", line 78, in _serve
    config.load()
    ~~~~~~~~~~~^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/config.py", line 439, in load
    self.loaded_app = import_from_string(self.app)
                      ~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/venv/lib/python3.13/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/app/main.py", line 12, in <module>
    from app.routers import auth, profiles, posts, connections, ai
  File "/Users/terence/Library/Mobile Documents/com~apple~CloudDocs/å­¦ä¹ /è½¯ä»¶è®¾è®¡/software_design_assessment/codespace/backend/app/routers/ai.py", line 30
    messages.append({"role": msg.role, "content": msg.content})
IndentationError: unexpected indent
