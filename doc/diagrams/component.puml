@startuml
skinparam componentStyle rectangle
skinparam linetype ortho

package "Client App" {
  [UI Frontend] as UI
}

package "API Gateway" {
  [REST API] as REST
  [WebSocket Server] as WS
}

package "Core Services" {
  [User Service] as UserSvc
  [Matchmaking Service] as MatchSvc
  [Chat Service] as ChatSvc
  [Social Service] as SocialSvc
}

package "AI Engine" {
  [NLP/Safety/Wingman] as AI
  [AI Companion Bot] as Bot
}

package "Data Persistence" {
  [PostgreSQL] as RDBMS
  [MongoDB] as NoSQL
  [Vector DB] as VectorDB
}

' Main Flow Path
UI --> REST : HTTP
UI --> WS : WSS

REST --> UserSvc
REST --> SocialSvc

WS --> ChatSvc
WS --> MatchSvc

' Services to AI
ChatSvc --> AI : analyze
MatchSvc --> Bot : fallback

' Services to Data
UserSvc --> RDBMS
SocialSvc --> RDBMS
ChatSvc --> NoSQL
MatchSvc --> VectorDB

note right of MatchSvc
  Random matching
  fallback to AI Bot
end note

note right of AI
  Content filtering
  & chat assistance
end note

note bottom of VectorDB
  User embeddings
  for matching
end note

@enduml
